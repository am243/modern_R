<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Package development | Modern R with the tidyverse</title>
  <meta name="description" content="This book will teach you how to use R to solve your statistical, data science and machine learning problems. Importing data, computing descriptive statistics, running regressions (or more complex machine learning models) and generating reports are some of the topics covered. No previous experience with R is needed." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Package development | Modern R with the tidyverse" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book will teach you how to use R to solve your statistical, data science and machine learning problems. Importing data, computing descriptive statistics, running regressions (or more complex machine learning models) and generating reports are some of the topics covered. No previous experience with R is needed." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Package development | Modern R with the tidyverse" />
  
  <meta name="twitter:description" content="This book will teach you how to use R to solve your statistical, data science and machine learning problems. Importing data, computing descriptive statistics, running regressions (or more complex machine learning models) and generating reports are some of the topics covered. No previous experience with R is needed." />
  

<meta name="author" content="Bruno Rodrigues" />


<meta name="date" content="2020-11-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functional-programming.html"/>
<link rel="next" href="further-topics.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Modern R with the tidyverse</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#note-to-the-reader"><i class="fa fa-check"></i>Note to the reader</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-r"><i class="fa fa-check"></i>What is R?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i>Who is this book for?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-this-book"><i class="fa fa-check"></i>Why this book?</a></li>
<li><a href="index.html#why-modern-r">Why <em>modern</em> R?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-is-rstudio"><i class="fa fa-check"></i>What is RStudio?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-to-expect-from-this-book"><i class="fa fa-check"></i>What to expect from this book?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-are-packages"><i class="fa fa-check"></i>What are packages?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-author"><i class="fa fa-check"></i>The author</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html"><i class="fa fa-check"></i><b>1</b> Getting to know RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#panes"><i class="fa fa-check"></i><b>1.1</b> Panes</a></li>
<li class="chapter" data-level="1.2" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#console"><i class="fa fa-check"></i><b>1.2</b> Console</a></li>
<li class="chapter" data-level="1.3" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#scripts"><i class="fa fa-check"></i><b>1.3</b> Scripts</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#the-help-pane"><i class="fa fa-check"></i><b>1.3.1</b> The help pane</a></li>
<li class="chapter" data-level="1.3.2" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#the-environment-pane"><i class="fa fa-check"></i><b>1.3.2</b> The Environment pane</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#options"><i class="fa fa-check"></i><b>1.4</b> Options</a></li>
<li class="chapter" data-level="1.5" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#keyboard-shortcuts"><i class="fa fa-check"></i><b>1.5</b> Keyboard shortcuts</a></li>
<li class="chapter" data-level="1.6" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#projects"><i class="fa fa-check"></i><b>1.6</b> Projects</a></li>
<li class="chapter" data-level="1.7" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#history"><i class="fa fa-check"></i><b>1.7</b> History</a></li>
<li class="chapter" data-level="1.8" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#plots"><i class="fa fa-check"></i><b>1.8</b> Plots</a></li>
<li class="chapter" data-level="1.9" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#addins"><i class="fa fa-check"></i><b>1.9</b> Addins</a></li>
<li class="chapter" data-level="1.10" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#packages"><i class="fa fa-check"></i><b>1.10</b> Packages</a></li>
<li class="chapter" data-level="1.11" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#exercises"><i class="fa fa-check"></i><b>1.11</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="getting-to-know-rstudio.html"><a href="getting-to-know-rstudio.html#exercise-1"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html"><i class="fa fa-check"></i><b>2</b> Objects, types and useful R functions to get started</a>
<ul>
<li class="chapter" data-level="2.1" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-numeric-class"><i class="fa fa-check"></i><b>2.1</b> The <code>numeric</code> class</a></li>
<li class="chapter" data-level="2.2" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-character-class"><i class="fa fa-check"></i><b>2.2</b> The <code>character</code> class</a></li>
<li class="chapter" data-level="2.3" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-factor-class"><i class="fa fa-check"></i><b>2.3</b> The <code>factor</code> class</a></li>
<li class="chapter" data-level="2.4" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-date-class"><i class="fa fa-check"></i><b>2.4</b> The <code>Date</code> class</a></li>
<li class="chapter" data-level="2.5" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-logical-class"><i class="fa fa-check"></i><b>2.5</b> The <code>logical</code> class</a></li>
<li class="chapter" data-level="2.6" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#vectors-and-matrices"><i class="fa fa-check"></i><b>2.6</b> Vectors and matrices</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-c-function"><i class="fa fa-check"></i><b>2.6.1</b> The <code>c()</code> function</a></li>
<li class="chapter" data-level="2.6.2" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#cbind-and-rbind"><i class="fa fa-check"></i><b>2.6.2</b> <code>cbind()</code> and <code>rbind()</code></a></li>
<li class="chapter" data-level="2.6.3" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-matrix-class"><i class="fa fa-check"></i><b>2.6.3</b> The <code>matrix</code> class</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-list-class"><i class="fa fa-check"></i><b>2.7</b> The <code>list</code> class</a></li>
<li class="chapter" data-level="2.8" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#the-data.frame-and-tibble-classes"><i class="fa fa-check"></i><b>2.8</b> The <code>data.frame</code> and <code>tibble</code> classes</a></li>
<li class="chapter" data-level="2.9" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#formulas"><i class="fa fa-check"></i><b>2.9</b> Formulas</a></li>
<li class="chapter" data-level="2.10" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#models"><i class="fa fa-check"></i><b>2.10</b> Models</a></li>
<li class="chapter" data-level="2.11" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#null-na-and-nan"><i class="fa fa-check"></i><b>2.11</b> NULL, NA and NaN</a></li>
<li class="chapter" data-level="2.12" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#useful-functions-to-get-you-started"><i class="fa fa-check"></i><b>2.12</b> Useful functions to get you started</a>
<ul>
<li class="chapter" data-level="2.12.1" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#sequences"><i class="fa fa-check"></i><b>2.12.1</b> Sequences</a></li>
<li class="chapter" data-level="2.12.2" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#basic-string-manipulation"><i class="fa fa-check"></i><b>2.12.2</b> Basic string manipulation</a></li>
</ul></li>
<li class="chapter" data-level="2.13" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercises-1"><i class="fa fa-check"></i><b>2.13</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-1-1"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-3"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-4"><i class="fa fa-check"></i>Exercise 4</a></li>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-5"><i class="fa fa-check"></i>Exercise 5</a></li>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-6"><i class="fa fa-check"></i>Exercise 6</a></li>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-7"><i class="fa fa-check"></i>Exercise 7</a></li>
<li class="chapter" data-level="" data-path="objects-types-and-useful-r-functions-to-get-started.html"><a href="objects-types-and-useful-r-functions-to-get-started.html#exercise-8"><i class="fa fa-check"></i>Exercise 8</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>3</b> Reading and writing data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#the-swiss-army-knife-of-data-import-and-export-rio"><i class="fa fa-check"></i><b>3.1</b> The swiss army knife of data import and export: <code>{rio}</code></a></li>
<li class="chapter" data-level="3.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-any-object-to-disk"><i class="fa fa-check"></i><b>3.2</b> Writing any object to disk</a></li>
<li class="chapter" data-level="3.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#using-rstudio-projects-to-manage-paths"><i class="fa fa-check"></i><b>3.3</b> Using RStudio projects to manage paths</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Descriptive statistics and data manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#a-data-exploration-exercice-using-base-r"><i class="fa fa-check"></i><b>4.1</b> A data exploration exercice using <em>base</em> R</a></li>
<li class="chapter" data-level="4.2" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#smoking-is-bad-for-you-but-pipes-are-your-friend"><i class="fa fa-check"></i><b>4.2</b> Smoking is bad for you, but pipes are your friend</a></li>
<li class="chapter" data-level="4.3" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#the-tidyverses-enfant-prodige-dplyr"><i class="fa fa-check"></i><b>4.3</b> The <code>{tidyverse}</code>’s <em>enfant prodige</em>: <code>{dplyr}</code></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#a-first-taste-of-data-manipulation-with-dplyr"><i class="fa fa-check"></i><b>4.3.1</b> A first taste of data manipulation with <code>{dplyr}</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#filter-the-rows-of-a-dataset-with-filter"><i class="fa fa-check"></i><b>4.3.2</b> Filter the rows of a dataset with <code>filter()</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#select-columns-with-select"><i class="fa fa-check"></i><b>4.3.3</b> Select columns with <code>select()</code></a></li>
<li class="chapter" data-level="4.3.4" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#group-the-observations-of-your-dataset-with-group_by"><i class="fa fa-check"></i><b>4.3.4</b> Group the observations of your dataset with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#groups-country-18"><i class="fa fa-check"></i><b>4.4</b> # Groups: country [18]</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#get-summary-statistics-with-summarise"><i class="fa fa-check"></i><b>4.4.1</b> Get summary statistics with <code>summarise()</code></a></li>
<li class="chapter" data-level="4.4.2" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#adding-columns-with-mutate-and-transmute"><i class="fa fa-check"></i><b>4.4.2</b> Adding columns with <code>mutate()</code> and <code>transmute()</code></a></li>
<li class="chapter" data-level="4.4.3" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#joining-tibbles-with-full_join-left_join-right_join-and-all-the-others"><i class="fa fa-check"></i><b>4.4.3</b> Joining <code>tibble</code>s with <code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code> and all the others</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#reshaping-data-with-tidyr"><i class="fa fa-check"></i><b>4.5</b> Reshaping data with <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#pivot_wider-and-pivot_longer"><i class="fa fa-check"></i><b>4.5.1</b> <code>pivot_wider()</code> and <code>pivot_longer()</code></a></li>
<li class="chapter" data-level="4.5.2" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#spread-and-gather"><i class="fa fa-check"></i><b>4.5.2</b> <code>spread()</code> and <code>gather()</code></a></li>
<li class="chapter" data-level="4.5.3" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#fill-and-full_seq"><i class="fa fa-check"></i><b>4.5.3</b> <code>fill()</code> and <code>full_seq()</code></a></li>
<li class="chapter" data-level="4.5.4" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#put-order-in-your-columns-with-separate-unite-and-in-your-rows-with-separate_rows"><i class="fa fa-check"></i><b>4.5.4</b> Put order in your columns with <code>separate()</code>, <code>unite()</code>, and in your rows with <code>separate_rows()</code></a></li>
<li class="chapter" data-level="4.5.5" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#a-sneak-peek-to-chapter-8-nest"><i class="fa fa-check"></i><b>4.5.5</b> A sneak peek to Chapter 8; <code>nest()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#working-on-many-columns-with-across"><i class="fa fa-check"></i><b>4.6</b> Working on many columns with <code>across()</code></a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#filter-and-across"><i class="fa fa-check"></i><b>4.6.1</b> <code>filter()</code> and <code>across()</code></a></li>
<li class="chapter" data-level="4.6.2" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#selecting-and-renaming-with-across"><i class="fa fa-check"></i><b>4.6.2</b> Selecting and renaming with <code>across()</code></a></li>
<li class="chapter" data-level="4.6.3" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#group_by-and-across"><i class="fa fa-check"></i><b>4.6.3</b> <code>group_by()</code> and <code>across()</code></a></li>
<li class="chapter" data-level="4.6.4" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#summarise-across-many-columns"><i class="fa fa-check"></i><b>4.6.4</b> <code>summarise()</code> across many columns</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#other-useful-tidyverse-functions"><i class="fa fa-check"></i><b>4.7</b> Other useful <code>{tidyverse}</code> functions</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#if_else-case_when-and-recode"><i class="fa fa-check"></i><b>4.7.1</b> <code>if_else()</code>, <code>case_when()</code> and <code>recode()</code></a></li>
<li class="chapter" data-level="4.7.2" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#lead-and-lag"><i class="fa fa-check"></i><b>4.7.2</b> <code>lead()</code> and <code>lag()</code></a></li>
<li class="chapter" data-level="4.7.3" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#ntile"><i class="fa fa-check"></i><b>4.7.3</b> <code>ntile()</code></a></li>
<li class="chapter" data-level="4.7.4" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#arrange"><i class="fa fa-check"></i><b>4.7.4</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="4.7.5" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#tally-and-count"><i class="fa fa-check"></i><b>4.7.5</b> <code>tally()</code> and <code>count()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#special-packages-for-special-kinds-of-data-forcats-lubridate-and-stringr"><i class="fa fa-check"></i><b>4.8</b> Special packages for special kinds of data: <code>{forcats}</code>, <code>{lubridate}</code>, and <code>{stringr}</code></a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#section"><i class="fa fa-check"></i><b>4.8.1</b> 🐈🐈🐈🐈</a></li>
<li class="chapter" data-level="4.8.2" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#get-your-dates-right-with-lubridate"><i class="fa fa-check"></i><b>4.8.2</b> Get your dates right with <code>{lubridate}</code></a></li>
<li class="chapter" data-level="4.8.3" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#manipulate-strings-with-stringr"><i class="fa fa-check"></i><b>4.8.3</b> Manipulate strings with <code>{stringr}</code></a></li>
<li class="chapter" data-level="4.8.4" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#tidy-data-frames-with-tibble"><i class="fa fa-check"></i><b>4.8.4</b> Tidy data frames with <code>{tibble}</code></a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#list-columns"><i class="fa fa-check"></i><b>4.9</b> List-columns</a></li>
<li class="chapter" data-level="4.10" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#going-beyond-descriptive-statistics-and-data-manipulation"><i class="fa fa-check"></i><b>4.10</b> Going beyond descriptive statistics and data manipulation</a></li>
<li class="chapter" data-level="4.11" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#exercises-2"><i class="fa fa-check"></i><b>4.11</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#exercise-1-2"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#exercise-2-1"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#exercise-3-1"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="descriptive-statistics-and-data-manipulation.html"><a href="descriptive-statistics-and-data-manipulation.html#exercise-4-1"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphs.html"><a href="graphs.html"><i class="fa fa-check"></i><b>5</b> Graphs</a>
<ul>
<li class="chapter" data-level="5.1" data-path="graphs.html"><a href="graphs.html#resources"><i class="fa fa-check"></i><b>5.1</b> Resources</a></li>
<li class="chapter" data-level="5.2" data-path="graphs.html"><a href="graphs.html#examples"><i class="fa fa-check"></i><b>5.2</b> Examples</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="graphs.html"><a href="graphs.html#barplots"><i class="fa fa-check"></i><b>5.2.1</b> Barplots</a></li>
<li class="chapter" data-level="5.2.2" data-path="graphs.html"><a href="graphs.html#scatter-plots"><i class="fa fa-check"></i><b>5.2.2</b> Scatter plots</a></li>
<li class="chapter" data-level="5.2.3" data-path="graphs.html"><a href="graphs.html#density"><i class="fa fa-check"></i><b>5.2.3</b> Density</a></li>
<li class="chapter" data-level="5.2.4" data-path="graphs.html"><a href="graphs.html#line-plots"><i class="fa fa-check"></i><b>5.2.4</b> Line plots</a></li>
<li class="chapter" data-level="5.2.5" data-path="graphs.html"><a href="graphs.html#facets"><i class="fa fa-check"></i><b>5.2.5</b> Facets</a></li>
<li class="chapter" data-level="5.2.6" data-path="graphs.html"><a href="graphs.html#pie-charts"><i class="fa fa-check"></i><b>5.2.6</b> Pie Charts</a></li>
<li class="chapter" data-level="5.2.7" data-path="graphs.html"><a href="graphs.html#adding-text-to-plots"><i class="fa fa-check"></i><b>5.2.7</b> Adding text to plots</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="graphs.html"><a href="graphs.html#customization"><i class="fa fa-check"></i><b>5.3</b> Customization</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="graphs.html"><a href="graphs.html#changing-titles-axes-labels-options-mixing-geoms-and-changing-themes"><i class="fa fa-check"></i><b>5.3.1</b> Changing titles, axes labels, options, mixing geoms and changing themes</a></li>
<li class="chapter" data-level="5.3.2" data-path="graphs.html"><a href="graphs.html#colour-schemes"><i class="fa fa-check"></i><b>5.3.2</b> Colour schemes</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="graphs.html"><a href="graphs.html#saving-plots-to-disk"><i class="fa fa-check"></i><b>5.4</b> Saving plots to disk</a></li>
<li class="chapter" data-level="5.5" data-path="graphs.html"><a href="graphs.html#exercises-3"><i class="fa fa-check"></i><b>5.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="graphs.html"><a href="graphs.html#exercise-1-3"><i class="fa fa-check"></i>Exercise 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="statistical-models.html"><a href="statistical-models.html"><i class="fa fa-check"></i><b>6</b> Statistical models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="statistical-models.html"><a href="statistical-models.html#terminology"><i class="fa fa-check"></i><b>6.1</b> Terminology</a></li>
<li class="chapter" data-level="6.2" data-path="statistical-models.html"><a href="statistical-models.html#fitting-a-model-to-data"><i class="fa fa-check"></i><b>6.2</b> Fitting a model to data</a></li>
<li class="chapter" data-level="6.3" data-path="statistical-models.html"><a href="statistical-models.html#diagnostics"><i class="fa fa-check"></i><b>6.3</b> Diagnostics</a></li>
<li class="chapter" data-level="6.4" data-path="statistical-models.html"><a href="statistical-models.html#interpreting-models"><i class="fa fa-check"></i><b>6.4</b> Interpreting models</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="statistical-models.html"><a href="statistical-models.html#marginal-effects"><i class="fa fa-check"></i><b>6.4.1</b> Marginal effects</a></li>
<li class="chapter" data-level="6.4.2" data-path="statistical-models.html"><a href="statistical-models.html#explainability-of-black-box-models"><i class="fa fa-check"></i><b>6.4.2</b> Explainability of <em>black-box</em> models</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="statistical-models.html"><a href="statistical-models.html#comparing-models"><i class="fa fa-check"></i><b>6.5</b> Comparing models</a></li>
<li class="chapter" data-level="6.6" data-path="statistical-models.html"><a href="statistical-models.html#using-a-model-for-prediction"><i class="fa fa-check"></i><b>6.6</b> Using a model for prediction</a></li>
<li class="chapter" data-level="6.7" data-path="statistical-models.html"><a href="statistical-models.html#beyond-linear-regression"><i class="fa fa-check"></i><b>6.7</b> Beyond linear regression</a></li>
<li class="chapter" data-level="6.8" data-path="statistical-models.html"><a href="statistical-models.html#hyper-parameters"><i class="fa fa-check"></i><b>6.8</b> Hyper-parameters</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="statistical-models.html"><a href="statistical-models.html#ridge-regression"><i class="fa fa-check"></i><b>6.8.1</b> Ridge regression</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="statistical-models.html"><a href="statistical-models.html#training-validating-and-testing-models"><i class="fa fa-check"></i><b>6.9</b> Training, validating, and testing models</a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="statistical-models.html"><a href="statistical-models.html#set-up"><i class="fa fa-check"></i><b>6.9.1</b> Set up</a></li>
<li class="chapter" data-level="6.9.2" data-path="statistical-models.html"><a href="statistical-models.html#bayesian-hyperparameter-optimization"><i class="fa fa-check"></i><b>6.9.2</b> Bayesian hyperparameter optimization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html"><i class="fa fa-check"></i><b>7</b> Defining your own functions</a>
<ul>
<li class="chapter" data-level="7.1" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#control-flow"><i class="fa fa-check"></i><b>7.1</b> Control flow</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#if-else"><i class="fa fa-check"></i><b>7.1.1</b> If-else</a></li>
<li class="chapter" data-level="7.1.2" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#for-loops"><i class="fa fa-check"></i><b>7.1.2</b> For loops</a></li>
<li class="chapter" data-level="7.1.3" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#while-loops"><i class="fa fa-check"></i><b>7.1.3</b> While loops</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#writing-your-own-functions"><i class="fa fa-check"></i><b>7.2</b> Writing your own functions</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#declaring-functions-in-r"><i class="fa fa-check"></i><b>7.2.1</b> Declaring functions in R</a></li>
<li class="chapter" data-level="7.2.2" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#fibonacci-numbers"><i class="fa fa-check"></i><b>7.2.2</b> Fibonacci numbers</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercises-4"><i class="fa fa-check"></i><b>7.3</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercise-1-4"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercise-2-2"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercise-3-2"><i class="fa fa-check"></i>Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#functions-that-take-functions-as-arguments-writing-your-own-higher-order-functions"><i class="fa fa-check"></i><b>7.4</b> Functions that take functions as arguments: writing your own higher-order functions</a></li>
<li class="chapter" data-level="7.5" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#functions-that-take-columns-of-data-as-arguments"><i class="fa fa-check"></i><b>7.5</b> Functions that take columns of data as arguments</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#the-enquo---approach"><i class="fa fa-check"></i><b>7.5.1</b> The <code>enquo() - !!()</code> approach</a></li>
<li class="chapter" data-level="7.5.2" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#curly-curly-a-simplified-approach-to-the-enquo-and-framework"><i class="fa fa-check"></i><b>7.5.2</b> Curly Curly, a simplified approach to the <code>enquo()</code> and <code>!!()</code> framework</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#functions-that-use-loops"><i class="fa fa-check"></i><b>7.6</b> Functions that use loops</a></li>
<li class="chapter" data-level="7.7" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#anonymous-functions"><i class="fa fa-check"></i><b>7.7</b> Anonymous functions</a></li>
<li class="chapter" data-level="7.8" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercises-5"><i class="fa fa-check"></i><b>7.8</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercise-1-5"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercise-2-3"><i class="fa fa-check"></i>Exercise 2</a></li>
<li class="chapter" data-level="" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercise-3-3"><i class="fa fa-check"></i>Exercise 3</a></li>
<li class="chapter" data-level="" data-path="defining-your-own-functions.html"><a href="defining-your-own-functions.html#exercise-4-2"><i class="fa fa-check"></i>Exercise 4</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="functional-programming.html"><a href="functional-programming.html"><i class="fa fa-check"></i><b>8</b> Functional programming</a>
<ul>
<li class="chapter" data-level="8.1" data-path="functional-programming.html"><a href="functional-programming.html#function-definitions"><i class="fa fa-check"></i><b>8.1</b> Function definitions</a></li>
<li class="chapter" data-level="8.2" data-path="functional-programming.html"><a href="functional-programming.html#properties-of-functions"><i class="fa fa-check"></i><b>8.2</b> Properties of functions</a></li>
<li class="chapter" data-level="8.3" data-path="functional-programming.html"><a href="functional-programming.html#functional-programming-with-purrr"><i class="fa fa-check"></i><b>8.3</b> Functional programming with <code>{purrr}</code></a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="functional-programming.html"><a href="functional-programming.html#doing-away-with-loops-the-map-family-of-functions"><i class="fa fa-check"></i><b>8.3.1</b> Doing away with loops: the <code>map*()</code> family of functions</a></li>
<li class="chapter" data-level="8.3.2" data-path="functional-programming.html"><a href="functional-programming.html#reducing-with-purrr"><i class="fa fa-check"></i><b>8.3.2</b> Reducing with <code>purrr</code></a></li>
<li class="chapter" data-level="8.3.3" data-path="functional-programming.html"><a href="functional-programming.html#error-handling-with-safely-and-possibly"><i class="fa fa-check"></i><b>8.3.3</b> Error handling with <code>safely()</code> and <code>possibly()</code></a></li>
<li class="chapter" data-level="8.3.4" data-path="functional-programming.html"><a href="functional-programming.html#partial-applications-with-partial"><i class="fa fa-check"></i><b>8.3.4</b> Partial applications with <code>partial()</code></a></li>
<li class="chapter" data-level="8.3.5" data-path="functional-programming.html"><a href="functional-programming.html#function-composition-using-compose"><i class="fa fa-check"></i><b>8.3.5</b> Function composition using <code>compose</code></a></li>
<li class="chapter" data-level="8.3.6" data-path="functional-programming.html"><a href="functional-programming.html#transposing-lists"><i class="fa fa-check"></i><b>8.3.6</b> «Transposing lists»</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="functional-programming.html"><a href="functional-programming.html#list-based-workflows-for-efficiency"><i class="fa fa-check"></i><b>8.4</b> List-based workflows for efficiency</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="functional-programming.html"><a href="functional-programming.html#functional-programming-and-plotting"><i class="fa fa-check"></i><b>8.4.1</b> Functional programming and plotting</a></li>
<li class="chapter" data-level="8.4.2" data-path="functional-programming.html"><a href="functional-programming.html#modeling-with-functional-programming"><i class="fa fa-check"></i><b>8.4.2</b> Modeling with functional programming</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="functional-programming.html"><a href="functional-programming.html#exercises-6"><i class="fa fa-check"></i><b>8.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="functional-programming.html"><a href="functional-programming.html#exercise-1-6"><i class="fa fa-check"></i>Exercise 1</a></li>
<li class="chapter" data-level="" data-path="functional-programming.html"><a href="functional-programming.html#exercise-2-4"><i class="fa fa-check"></i>Exercise 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="package-development.html"><a href="package-development.html"><i class="fa fa-check"></i><b>9</b> Package development</a>
<ul>
<li class="chapter" data-level="9.1" data-path="package-development.html"><a href="package-development.html#why-you-need-to-write-your-own-package"><i class="fa fa-check"></i><b>9.1</b> Why you need to write your own package</a></li>
<li class="chapter" data-level="9.2" data-path="package-development.html"><a href="package-development.html#starting-easy-creating-a-package-to-share-data"><i class="fa fa-check"></i><b>9.2</b> Starting easy: creating a package to share data</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="package-development.html"><a href="package-development.html#setting-up-a-github-account"><i class="fa fa-check"></i><b>9.2.1</b> Setting up a Github account</a></li>
<li class="chapter" data-level="9.2.2" data-path="package-development.html"><a href="package-development.html#starting-your-package"><i class="fa fa-check"></i><b>9.2.2</b> Starting your package</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="package-development.html"><a href="package-development.html#including-data-inside-the-package"><i class="fa fa-check"></i><b>9.3</b> Including data inside the package</a></li>
<li class="chapter" data-level="9.4" data-path="package-development.html"><a href="package-development.html#adding-functions-to-your-package"><i class="fa fa-check"></i><b>9.4</b> Adding functions to your package</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="package-development.html"><a href="package-development.html#one-function-inside-one-script"><i class="fa fa-check"></i><b>9.4.1</b> One function inside one script</a></li>
<li class="chapter" data-level="9.4.2" data-path="package-development.html"><a href="package-development.html#many-functions-inside-a-script"><i class="fa fa-check"></i><b>9.4.2</b> Many functions inside a script</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="package-development.html"><a href="package-development.html#documenting-your-package"><i class="fa fa-check"></i><b>9.5</b> Documenting your package</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="package-development.html"><a href="package-development.html#description"><i class="fa fa-check"></i><b>9.5.1</b> Description</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="package-development.html"><a href="package-development.html#unit-testing-your-package"><i class="fa fa-check"></i><b>9.6</b> Unit testing your package</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="further-topics.html"><a href="further-topics.html"><i class="fa fa-check"></i><b>10</b> Further topics</a>
<ul>
<li class="chapter" data-level="10.1" data-path="further-topics.html"><a href="further-topics.html#using-python-from-r-with-reticulate"><i class="fa fa-check"></i><b>10.1</b> Using Python from R with <code>{reticulate}</code></a></li>
<li class="chapter" data-level="10.2" data-path="further-topics.html"><a href="further-topics.html#generating-pdf-or-word-reports-with-r"><i class="fa fa-check"></i><b>10.2</b> Generating Pdf or Word reports with R</a></li>
<li class="chapter" data-level="10.3" data-path="further-topics.html"><a href="further-topics.html#scraping-the-internet"><i class="fa fa-check"></i><b>10.3</b> Scraping the internet</a></li>
<li class="chapter" data-level="10.4" data-path="further-topics.html"><a href="further-topics.html#regular-expressions"><i class="fa fa-check"></i><b>10.4</b> Regular expressions</a></li>
<li class="chapter" data-level="10.5" data-path="further-topics.html"><a href="further-topics.html#setting-up-a-blog-with-blogdown"><i class="fa fa-check"></i><b>10.5</b> Setting up a blog with <code>{blogdown}</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modern R with the tidyverse</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="package-development" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> Package development</h1>
<div id="why-you-need-to-write-your-own-package" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Why you need to write your own package</h2>
<p>One of the reasons you might have tried R in the first place is the abundance of packages. As I’m
writing these lines (in November 2020) 16523 packages are available on CRAN (in August 2019, there
were 14762, and in August 2016, when I first wrote the number of packages down for my first ebook,
it was 8922 packages).</p>
<p>This is a staggering amount of packages and to help you look for the right ones, you can check
out <a href="https://cran.r-project.org/">CRAN Task Views</a>.</p>
<p>You might wonder why the heck should you write your own packages? After all, with so many packages
you’re sure to find something that suits your needs, right? Well, it depends. Of course, you will
not need to write you own function to perform non-linear regression, or to train a neural network.
But as time will go, you will start writing your own functions, functions that fit your needs, and
that you use daily. It may be functions that prepare and shape data that you use at work for
analysis. Or maybe you want to deliver an analysis to a client, with data and source code, so
you decide to deliver a package that contains everything (something I’ve already done in the
past). Maybe you want to develop a Shiny applications using the <code>{golem}</code> framework, which allows
you to build apps as packages.</p>
<p>Ok, but is it necessary to write a package? Why not just write functions inside some scripts and
then simply run or share these scripts (and in the case of Shiny, you don’t have to use <code>{golem}</code>)?
This seems like a valid solution at first. However, it quickly becomes tedious, especially if you
have multiple scripts scattered around your computer or inside different subfolders. You’ll also
have to write the documentation on separate files and these can easily get lost or become outdated.
Relying on scripts does not scale well; even if you are not sharing your code outside of your
computer (maybe you’re working on super secret projects at NASA), you always have to think about
future you. And in general, future you thinks that past you is an asshole, exactly because you put
0 effort in documenting, testing and making your code easy to use. Having everything inside a
package takes care of these headaches for you, and will make future you proud of past you. And if
you have to share your code, or deliver to a client, believe me, it will make things a thousand
times easier.</p>
<p>Code that is inside packages is very easy to document and test, especially if you’re using Rstudio.
It also makes it possible to use the wonderful <code>{covr}</code> package, which tells you which lines in
which functions are called by your tests. If some lines are missing, write tests that invoke them and
increase the coverage of your tests! Documenting and testing your code is very important; it gives
you assurance that the code your writing works, but most importantly, it gives <em>others</em> assurance
that what you wrote works. And I include future you in these <em>others</em> too.</p>
<p>In order to share this package with these <em>others</em> we are going to use Git. If you’re familiar with
Git, great, you’ll be able to skip some sections. If not, then buckle up, you’re in for a wild ride.</p>
<p>As I mentioned in the introduction, if you want to learn much more than I’ll show about packages
read <span class="citation">Wickham (<a href="#ref-wickham2015" role="doc-biblioref">2015</a>)</span>. I will only show you the basics, but it should be enough to get you productive.</p>
</div>
<div id="starting-easy-creating-a-package-to-share-data" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Starting easy: creating a package to share data</h2>
<p>We will start a package from scratch, in order to share data with the world. For this, we are first
going to scrape a table off Wikipedia, prepare the data and then include it in a package. To make
distributing this package easy, we’re going to put it up on Github, so you’ll need a Github account.</p>
<p>Let’s start by creating a Github account.</p>
<div id="setting-up-a-github-account" class="section level3" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Setting up a Github account</h3>
<p>Setting up a Github account is very easy; just go over to <a href="https://github.com/">https://github.com/</a>
and simply sign up!</p>
<p>Then you will need to generate a ssh key on your computer. This is a way for you to securely
interact with your Github account, and push your code to the repository without having to always
type your password. I will assume you never created any ssh
keys before, because if you already did, you could skip these steps. I will also assume that you are
on a GNU+Linux or macOS system; if you’re using windows, the instructions are very similar, but
you’ll first need to install Git available <a href="https://git-scm.com/downloads">here</a>. Git is available
by default on any GNU+Linux system, and as far as I know also on macOS, but I might be wrong and
you might also need to install git on macOS (but then the instructions are the same whether
you’re using GNU+Linux or macOS). If you have trouble installing git, read the following section
from the <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Pro Git book</a>.</p>
<p>Then, open a terminal (or the git command line on Windows) and type the following:</p>
<pre><code>ssh-keygen</code></pre>
<p>This command will generate several files in the <code>.ssh</code> directory inside your <code>HOME</code> directory. Look
for the file that ends with the <code>.pub</code> extension, and copy its contents. You will need to paste
these contents on Github.</p>
<p>So now sign in to Github; once you are signed in, go to settings and then <code>SSH and GPG keys</code>:</p>
<p><img src="pics/github_ssh.png" /><!-- --></p>
<p>In the screenshot above, you see my ssh key associated with my account; this will be empty for you.
Click on the top right, <em>New SSH key</em>:</p>
<p><img src="pics/github_add_ssh.png" /><!-- --></p>
<p>Give your key a name, and paste the key you generated before. You’re done! You can now configure
git a bit more by telling it who you are. Open a terminal, adapt and type the following commands:</p>
<pre><code>git config --global user.name &quot;Harold Zurcher&quot;
git config --global user.email harold.zurcher@madisonbus.com</code></pre>
<p>You’re ready to go!<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
You can now push code to github to share it with the world. Or if you do not want
to share you package (for confidentiality reasons for instance), you can still benefit from using
git, as it possible to have an internal git server that could be managed by your company’s IT team.
There is also the possibility to set up corporate, and thus private git servers by buying the service
from github, or other providers such as gitlab.</p>
</div>
<div id="starting-your-package" class="section level3" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Starting your package</h3>
<p><img src="pics/new_package.gif" /><!-- --></p>
<p>To start writing a package, the easiest way is to load up Rstudio and start a new project, under the
<em>File</em> menu. If you’re starting from scratch, just choose the first option, <em>New Directory</em> and then
<em>R package</em>. Give a new to your package, for example <code>arcade</code> (you’ll see why in a bit) and you can
also choose to use git for version control. Now if you check the folder where you chose to save
your package, you will see a folder with the same name as your package, and inside this folder a
lot of new files and other folders. The most important folder for now is the <code>R</code> folder. This is
the folder that will hold your <code>.R</code> source code files. You can also see these files and folders
inside the <em>Files</em> panel from within Rstudio. Rstudio will also have <code>hello.R</code> opened, which is a
single demo source file inside the <code>R</code> folder. You can get rid of this file, or keep it and edit it.</p>
<p>Now, to start working on your package, the best is to use a package called <code>{usethis}</code>. <code>{usethis}</code>
is a package that makes writing packages very easy; it includes functions that create the required
subfolders and necessary template files so that you do not need to constantly check how file so-and-so
should be placed or named.</p>
<p>Let’s start by adding a readme file. This is easily achieved by using the following function from
<code>{usethis}</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="package-development.html#cb3-1"></a>usethis<span class="op">::</span><span class="kw">use_readme_md</span>()</span></code></pre></div>
<p>This creates a template README.md file in the root directory of your package. You can now edit this
file accordingly, and that’s it.</p>
<p>The next step could be setting up your package to work with <code>{roxygen2}</code>, which will help write
the documentation of your package:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="package-development.html#cb4-1"></a>usethis<span class="op">::</span><span class="kw">use_roxygen_md</span>()</span></code></pre></div>
<p>The output tells you to run <code>devtools::document()</code>, we will do this later.</p>
<p>Since you have learned about the tidyverse by reading this book, I am willing to bet that you will
want to use the <code>%&gt;%</code> operator inside the functions contained in your package. To do this without issues,
which wil become apparent later, use the following command:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="package-development.html#cb5-1"></a>usethis<span class="op">::</span><span class="kw">use_pipe</span>()</span></code></pre></div>
<p>This will make the <code>%&gt;%</code> operator available internally to your package’s functions, but also to the
user that will load the package.</p>
<p>We are almost done setting up the package. If you plan on distributing data with your package,
you might want to also share the code that prepared the data. For instance, if you receive the
data from your finance department, but this data needs some cleaning before being useful, you could
write a script to do so and then distribute this script also with the package, for reproducibility
purposes. These scripts, while not central to the package, could still be of interest to the users.
The directory to place them is called <code>data-raw</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="package-development.html#cb6-1"></a>usethis<span class="op">::</span><span class="kw">use_data_raw</span>()</span></code></pre></div>
<p>One final folder is <code>inst</code>. You can add files to this folder, and they will be available to the users
that install the package. Users can find the files in the folder where packages get installed. On
GNU+Linux systems, that would be somewhere like: <code>/home/user/R/amd64-linux-gnu-library/3.6</code>. There,
you will find the installation folders of all the packages. If the package you make is called <code>{spam}</code>,
you will find the files you put inside the <code>inst</code> folder on the root of the installation folder of
<code>spam</code>. You can simply create the <code>inst</code> folder yourself, or use the following command:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="package-development.html#cb7-1"></a>usethis<span class="op">::</span><span class="kw">use_directory</span>(<span class="st">&quot;inst&quot;</span>)</span></code></pre></div>
<p>Finally, the last step is to give your package a license; this again is only useful if you plan on
distributing it to the world. If you are writing your own package for yourself, or for purposes
internal to your company, this is probably superfluous. I won’t discuss the particularities of
licenses, so let’s just say that for the sake of this example package we are writing, we are going
to use the MIT license:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="package-development.html#cb8-1"></a>usethis<span class="op">::</span><span class="kw">use_mit_license</span>()</span></code></pre></div>
<p>This again creates the right file at the right spot. There are other interesting functions inside
the <code>{usethis}</code> package, and we will come back to it later.</p>
</div>
</div>
<div id="including-data-inside-the-package" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Including data inside the package</h2>
<p>Many packages include data and we are going to learn how to do it. I’ll assume that we already
have a dataset on hand that we have to share. This is quite simple to do, first let’s simply
load the data:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="package-development.html#cb9-1"></a>arcade &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;~/path/to/data/arcade.csv&quot;</span>)</span></code></pre></div>
<p>and then use, once again, <code>{usethis}</code> comes to our rescue:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="package-development.html#cb10-1"></a>usethis<span class="op">::</span><span class="kw">use_data</span>(arcade, <span class="dt">compress =</span> <span class="st">&quot;xz&quot;</span>)</span></code></pre></div>
<p>that’s it! Well almost. We still need to write a little script that will allow users of your
package to load the data. This script is simply called <code>data.R</code> and contains the following lines:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="package-development.html#cb11-1"></a><span class="co">#&#39; List of highest-grossing games</span></span>
<span id="cb11-2"><a href="package-development.html#cb11-2"></a><span class="co">#&#39;</span></span>
<span id="cb11-3"><a href="package-development.html#cb11-3"></a><span class="co">#&#39; Source: https://en.wikipedia.org/wiki/Arcade_game#List_of_highest-grossing_games</span></span>
<span id="cb11-4"><a href="package-development.html#cb11-4"></a><span class="co">#&#39;</span></span>
<span id="cb11-5"><a href="package-development.html#cb11-5"></a><span class="co">#&#39; @format A data frame with 6 variables: \code{game}, \code{release_year},</span></span>
<span id="cb11-6"><a href="package-development.html#cb11-6"></a><span class="co">#&#39;   \code{hardware_units_sold}, \code{comment_hardware}, \code{estimated_gross_revenue}, </span></span>
<span id="cb11-7"><a href="package-development.html#cb11-7"></a><span class="co">#&#39;   \code{comment_revenue}</span></span>
<span id="cb11-8"><a href="package-development.html#cb11-8"></a><span class="co">#&#39; \describe{</span></span>
<span id="cb11-9"><a href="package-development.html#cb11-9"></a><span class="co">#&#39; \item{game}{The name of the game}</span></span>
<span id="cb11-10"><a href="package-development.html#cb11-10"></a><span class="co">#&#39; \item{release_year}{The year the game was released}</span></span>
<span id="cb11-11"><a href="package-development.html#cb11-11"></a><span class="co">#&#39; \item{hardware_units_sold}{The amount of hardware units sold}</span></span>
<span id="cb11-12"><a href="package-development.html#cb11-12"></a><span class="co">#&#39; \item{comment_hardware}{Comment accompanying the amount of hardware units sold}</span></span>
<span id="cb11-13"><a href="package-development.html#cb11-13"></a><span class="co">#&#39; \item{estimated_gross_revenue}{Estimated gross revenue in US$ with 2019 inflation}</span></span>
<span id="cb11-14"><a href="package-development.html#cb11-14"></a><span class="co">#&#39; \item{comment_revenue}{Comment accompanying the amount of hardware units sold}</span></span>
<span id="cb11-15"><a href="package-development.html#cb11-15"></a><span class="co">#&#39; }</span></span>
<span id="cb11-16"><a href="package-development.html#cb11-16"></a><span class="st">&quot;arcade&quot;</span></span></code></pre></div>
<p>Basically this is a description of the data, and the name with which the user will invoke the data. To
conclude this part, remember the <code>data-raw</code> folder? If you used a script to scrape/get the data
from somewhere, or if you had to write code to prepare the data to make it fit for sharing, this
is where you can put that script. I have written such a script, I will discuss it in the next
chapter, where I’ll show you how to scrape data from the internet.</p>
</div>
<div id="adding-functions-to-your-package" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Adding functions to your package</h2>
<p>Functions will be added inside the <code>R</code> package. In there, you will find the <code>hello.R</code> file. You can
edit this file if you kept it or you can create a new script. This script can hold one function, or
several functions.
Let’s start with the simplest case; one function inside one script.</p>
<div id="one-function-inside-one-script" class="section level3" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> One function inside one script</h3>
<p>Create a new R script, or edit the <code>hello.R</code> file, and add in the following code:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="package-development.html#cb12-1"></a><span class="co">#&#39; Compute descriptive statistics for the numeric columns of a data frame.</span></span>
<span id="cb12-2"><a href="package-development.html#cb12-2"></a><span class="co">#&#39; @param df The data frame to summarise.</span></span>
<span id="cb12-3"><a href="package-development.html#cb12-3"></a><span class="co">#&#39; @param ... Optional. Columns in the data frame</span></span>
<span id="cb12-4"><a href="package-development.html#cb12-4"></a><span class="co">#&#39; @return A data frame with descriptive statistics. If you are only interested in certain columns</span></span>
<span id="cb12-5"><a href="package-development.html#cb12-5"></a><span class="co">#&#39; you can add these columns.</span></span>
<span id="cb12-6"><a href="package-development.html#cb12-6"></a><span class="co">#&#39; @import dplyr</span></span>
<span id="cb12-7"><a href="package-development.html#cb12-7"></a><span class="co">#&#39; @importFrom tidyr gather</span></span>
<span id="cb12-8"><a href="package-development.html#cb12-8"></a><span class="co">#&#39; @export</span></span>
<span id="cb12-9"><a href="package-development.html#cb12-9"></a><span class="co">#&#39; @examples</span></span>
<span id="cb12-10"><a href="package-development.html#cb12-10"></a><span class="co">#&#39; \dontrun{</span></span>
<span id="cb12-11"><a href="package-development.html#cb12-11"></a><span class="co">#&#39; describe(dataset)</span></span>
<span id="cb12-12"><a href="package-development.html#cb12-12"></a><span class="co">#&#39; describe(dataset, col1, col2)</span></span>
<span id="cb12-13"><a href="package-development.html#cb12-13"></a><span class="co">#&#39; }</span></span>
<span id="cb12-14"><a href="package-development.html#cb12-14"></a>describe_numeric &lt;-<span class="st"> </span><span class="cf">function</span>(df, ...){</span>
<span id="cb12-15"><a href="package-development.html#cb12-15"></a></span>
<span id="cb12-16"><a href="package-development.html#cb12-16"></a>    <span class="cf">if</span> (<span class="kw">nargs</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) df &lt;-<span class="st"> </span><span class="kw">select</span>(df, ...)</span>
<span id="cb12-17"><a href="package-development.html#cb12-17"></a></span>
<span id="cb12-18"><a href="package-development.html#cb12-18"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb12-19"><a href="package-development.html#cb12-19"></a><span class="st">        </span><span class="kw">select_if</span>(is.numeric) <span class="op">%&gt;%</span></span>
<span id="cb12-20"><a href="package-development.html#cb12-20"></a><span class="st">        </span><span class="kw">gather</span>(variable, value) <span class="op">%&gt;%</span></span>
<span id="cb12-21"><a href="package-development.html#cb12-21"></a><span class="st">        </span><span class="kw">group_by</span>(variable) <span class="op">%&gt;%</span></span>
<span id="cb12-22"><a href="package-development.html#cb12-22"></a><span class="st">        </span><span class="kw">summarise_all</span>(<span class="kw">list</span>(<span class="dt">mean =</span> <span class="op">~</span><span class="kw">mean</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-23"><a href="package-development.html#cb12-23"></a>                           <span class="dt">sd =</span> <span class="op">~</span><span class="kw">sd</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-24"><a href="package-development.html#cb12-24"></a>                           <span class="dt">nobs =</span> <span class="op">~</span><span class="kw">length</span>(.),</span>
<span id="cb12-25"><a href="package-development.html#cb12-25"></a>                           <span class="dt">min =</span> <span class="op">~</span><span class="kw">min</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-26"><a href="package-development.html#cb12-26"></a>                           <span class="dt">max =</span> <span class="op">~</span><span class="kw">max</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-27"><a href="package-development.html#cb12-27"></a>                           <span class="dt">q05 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.05</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-28"><a href="package-development.html#cb12-28"></a>                           <span class="dt">q25 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-29"><a href="package-development.html#cb12-29"></a>                           <span class="dt">mode =</span> <span class="op">~</span><span class="kw">as.character</span>(brotools<span class="op">::</span><span class="kw">sample_mode</span>(.), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-30"><a href="package-development.html#cb12-30"></a>                           <span class="dt">median =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.5</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-31"><a href="package-development.html#cb12-31"></a>                           <span class="dt">q75 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.75</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-32"><a href="package-development.html#cb12-32"></a>                           <span class="dt">q95 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.95</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb12-33"><a href="package-development.html#cb12-33"></a>                           <span class="dt">n_missing =</span> <span class="op">~</span><span class="kw">sum</span>(<span class="kw">is.na</span>(.)))) <span class="op">%&gt;%</span></span>
<span id="cb12-34"><a href="package-development.html#cb12-34"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">type =</span> <span class="st">&quot;Numeric&quot;</span>)</span>
<span id="cb12-35"><a href="package-development.html#cb12-35"></a>}</span></code></pre></div>
<p>Save the script under the name <code>describe.R</code>.</p>
<p>This function shows you pretty much you need to know when writing functions for packages. First,
there’s the comment lines, that start with <code>#'</code> and not with <code>#</code>. These lines will be converted
into the function’s documentation which you and your package’s users will be able to read in
Rstudio’s <em>Help</em> pane. Notice the keywords that start with <code>@</code>. These are quite important:</p>
<ul>
<li><code>@param</code>: used to define the function’s parameters;</li>
<li><code>@return</code>: used to define the object returned by the function;</li>
<li><code>@import</code>: if the function needs functions from another package, in the present case <code>{dplyr}</code>;
then this is where you would define these. Separate several package with a space;</li>
<li><code>@importFrom</code>: if the function only needs one function from a package, define it here. Read it as
<em>from tidyr import gather</em>, very similar to how it is done in Python;</li>
<li><code>@export</code>: makes the function available to the users. If you omit this, this function will not
be available to the users and only available internally to the other functions of the package. Not
making functions available to users can be useful if you need to write functions that are used by
other functions but never be used by anyone directly. It is still possible to access these internal,
private, functions by using <code>:::</code>, as in, <code>package:::private_function()</code>;</li>
<li><code>@examples</code>: lists examples in the documentation. The <code>\dontrun{}</code> tag is used for when you do
not want these examples to run when building the package.</li>
</ul>
<p>As explained before, if the function depends on function from other packages, then <code>@import</code> or
<code>@importFrom</code> must be used. But it is also possible to use the <code>package::function()</code> syntax like
I did on the following line:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="package-development.html#cb13-1"></a>mode =<span class="st"> </span><span class="er">~</span><span class="kw">as.character</span>(brotools<span class="op">::</span><span class="kw">sample_mode</span>(.), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span></code></pre></div>
<p>This function uses the <code>sample_mode()</code> function from my <code>{brotools}</code> package. Since it is the only
function that I am using, I don’t import the whole package with <code>@import</code>. I could have done the
same for <code>gather()</code> from <code>{tidyr}</code> instead of using <code>@importFrom</code>, but I wanted to showcase
<code>@importFrom</code>, which can also be use to import several functions:</p>
<pre><code>@importFrom package function_1 function_2 function_3</code></pre>
<p>The way I’m doing this however is not optimal. If your package depends on many functions from
other packages that are not available on CRAN, but rather on Github, you might want to do that
in a cleaner way. The cleaner way is to add a “Remotes” field in the package’s NAMESPACE (this is
a very important file that gets generated automatically by <code>devtools::document()</code>) I won’t
cover this here, but you can read more about it <a href="https://cran.r-project.org/web/packages/devtools/vignettes/dependencies.html">here</a>.</p>
<p>Because I’m doing that in this hacky way, my <code>{brotools}</code> package should be installed:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="package-development.html#cb15-1"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;b-rodrigues/brotools&quot;</span>)</span></code></pre></div>
<p>Again, I want to emphasize that this is not the best way of doing it. However, using the “REMOTES”
field as described in the document I linked above is not complicated.</p>
<p>Now comes the function itself. The function is written in pretty much the same way as usual, but
there are some particularities. First of all, the second argument of the function is the <code>...</code>, which
were already covered in Chapter 7. I want to give the option to my users to specify any columns to
summarise only these columns, instead of all of them, which is the default behaviour. But because
I cannot know how many columns the user wants to summarize beforehand, and also because I do not
want to limit the user to 2 or 3 columns, I use the <code>...</code>.
But what if the user wants to summarize all the columns? This is taken care of in this line:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="package-development.html#cb16-1"></a>  <span class="cf">if</span> (<span class="kw">nargs</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) df &lt;-<span class="st"> </span><span class="kw">select</span>(df, ...)</span></code></pre></div>
<p><code>nargs()</code> counts the number of arguments of the function. If the user calls the function like so:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="package-development.html#cb17-1"></a><span class="kw">describe_numeric</span>(mtcars)</span></code></pre></div>
<p><code>nargs()</code> will return 1. If, instead, the user calls the function with one or more columns:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="package-development.html#cb18-1"></a><span class="kw">describe_numeric</span>(mtcars, hp, mpg)</span></code></pre></div>
<p>then <code>nargs()</code> will return 2 (in this case). And does, this piece of code will be executed:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="package-development.html#cb19-1"></a>df &lt;-<span class="st"> </span><span class="kw">select</span>(df, ...)</span></code></pre></div>
<p>which selects the columns <code>hp</code> and <code>mpg</code> from the <code>mtcars</code> dataset. This reduced data set is then
the one that is being summarized.</p>
</div>
<div id="many-functions-inside-a-script" class="section level3" number="9.4.2">
<h3><span class="header-section-number">9.4.2</span> Many functions inside a script</h3>
<p>If you need to add more functions, you can add more in the same
script, or create one script per function. The advantage of writing more than one function per
script is that you can keep functions that are conceptually similar in the same place. For instance,
if you want to add a function called <code>describe_character()</code> to your package, adding it to the same
script where <code>describe_numeric()</code> is might be a good idea, so let’s do just that:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="package-development.html#cb20-1"></a><span class="co">#&#39; Compute descriptive statistics for the numeric columns of a data frame.</span></span>
<span id="cb20-2"><a href="package-development.html#cb20-2"></a><span class="co">#&#39; @param df The data frame to summarise.</span></span>
<span id="cb20-3"><a href="package-development.html#cb20-3"></a><span class="co">#&#39; @param ... Optional. Columns in the data frame</span></span>
<span id="cb20-4"><a href="package-development.html#cb20-4"></a><span class="co">#&#39; @return A data frame with descriptive statistics. If you are only interested in certain columns</span></span>
<span id="cb20-5"><a href="package-development.html#cb20-5"></a><span class="co">#&#39; you can add these columns.</span></span>
<span id="cb20-6"><a href="package-development.html#cb20-6"></a><span class="co">#&#39; @import dplyr</span></span>
<span id="cb20-7"><a href="package-development.html#cb20-7"></a><span class="co">#&#39; @importFrom tidyr gather</span></span>
<span id="cb20-8"><a href="package-development.html#cb20-8"></a><span class="co">#&#39; @export</span></span>
<span id="cb20-9"><a href="package-development.html#cb20-9"></a><span class="co">#&#39; @examples</span></span>
<span id="cb20-10"><a href="package-development.html#cb20-10"></a><span class="co">#&#39; \dontrun{</span></span>
<span id="cb20-11"><a href="package-development.html#cb20-11"></a><span class="co">#&#39; describe(dataset)</span></span>
<span id="cb20-12"><a href="package-development.html#cb20-12"></a><span class="co">#&#39; describe(dataset, col1, col2)</span></span>
<span id="cb20-13"><a href="package-development.html#cb20-13"></a><span class="co">#&#39; }</span></span>
<span id="cb20-14"><a href="package-development.html#cb20-14"></a>describe_numeric &lt;-<span class="st"> </span><span class="cf">function</span>(df, ...){</span>
<span id="cb20-15"><a href="package-development.html#cb20-15"></a></span>
<span id="cb20-16"><a href="package-development.html#cb20-16"></a>    <span class="cf">if</span> (<span class="kw">nargs</span>() <span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>) df &lt;-<span class="st"> </span><span class="kw">select</span>(df, ...)</span>
<span id="cb20-17"><a href="package-development.html#cb20-17"></a></span>
<span id="cb20-18"><a href="package-development.html#cb20-18"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb20-19"><a href="package-development.html#cb20-19"></a><span class="st">        </span><span class="kw">select_if</span>(is.numeric) <span class="op">%&gt;%</span></span>
<span id="cb20-20"><a href="package-development.html#cb20-20"></a><span class="st">        </span><span class="kw">gather</span>(variable, value) <span class="op">%&gt;%</span></span>
<span id="cb20-21"><a href="package-development.html#cb20-21"></a><span class="st">        </span><span class="kw">group_by</span>(variable) <span class="op">%&gt;%</span></span>
<span id="cb20-22"><a href="package-development.html#cb20-22"></a><span class="st">        </span><span class="kw">summarise_all</span>(<span class="kw">list</span>(<span class="dt">mean =</span> <span class="op">~</span><span class="kw">mean</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-23"><a href="package-development.html#cb20-23"></a>                           <span class="dt">sd =</span> <span class="op">~</span><span class="kw">sd</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-24"><a href="package-development.html#cb20-24"></a>                           <span class="dt">nobs =</span> <span class="op">~</span><span class="kw">length</span>(.),</span>
<span id="cb20-25"><a href="package-development.html#cb20-25"></a>                           <span class="dt">min =</span> <span class="op">~</span><span class="kw">min</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-26"><a href="package-development.html#cb20-26"></a>                           <span class="dt">max =</span> <span class="op">~</span><span class="kw">max</span>(., <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-27"><a href="package-development.html#cb20-27"></a>                           <span class="dt">q05 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.05</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-28"><a href="package-development.html#cb20-28"></a>                           <span class="dt">q25 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-29"><a href="package-development.html#cb20-29"></a>                           <span class="dt">mode =</span> <span class="op">~</span><span class="kw">as.character</span>(brotools<span class="op">::</span><span class="kw">sample_mode</span>(.), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-30"><a href="package-development.html#cb20-30"></a>                           <span class="dt">median =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.5</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-31"><a href="package-development.html#cb20-31"></a>                           <span class="dt">q75 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.75</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-32"><a href="package-development.html#cb20-32"></a>                           <span class="dt">q95 =</span> <span class="op">~</span><span class="kw">quantile</span>(., <span class="fl">0.95</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-33"><a href="package-development.html#cb20-33"></a>                           <span class="dt">n_missing =</span> <span class="op">~</span><span class="kw">sum</span>(<span class="kw">is.na</span>(.)))) <span class="op">%&gt;%</span></span>
<span id="cb20-34"><a href="package-development.html#cb20-34"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">type =</span> <span class="st">&quot;Numeric&quot;</span>)</span>
<span id="cb20-35"><a href="package-development.html#cb20-35"></a>}</span>
<span id="cb20-36"><a href="package-development.html#cb20-36"></a></span>
<span id="cb20-37"><a href="package-development.html#cb20-37"></a><span class="co">#&#39; Compute descriptive statistics for the character or factor columns of a data frame.</span></span>
<span id="cb20-38"><a href="package-development.html#cb20-38"></a><span class="co">#&#39; @param df The data frame to summarise.</span></span>
<span id="cb20-39"><a href="package-development.html#cb20-39"></a><span class="co">#&#39; @return A data frame with a description of the character or factor columns.</span></span>
<span id="cb20-40"><a href="package-development.html#cb20-40"></a><span class="co">#&#39; @import dplyr</span></span>
<span id="cb20-41"><a href="package-development.html#cb20-41"></a><span class="co">#&#39; @importFrom tidyr gather</span></span>
<span id="cb20-42"><a href="package-development.html#cb20-42"></a>describe_character_or_factors &lt;-<span class="st"> </span><span class="cf">function</span>(df, type){</span>
<span id="cb20-43"><a href="package-development.html#cb20-43"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb20-44"><a href="package-development.html#cb20-44"></a><span class="st">        </span><span class="kw">gather</span>(variable, value) <span class="op">%&gt;%</span></span>
<span id="cb20-45"><a href="package-development.html#cb20-45"></a><span class="st">        </span><span class="kw">group_by</span>(variable) <span class="op">%&gt;%</span></span>
<span id="cb20-46"><a href="package-development.html#cb20-46"></a><span class="st">        </span><span class="kw">summarise_all</span>(<span class="kw">funs</span>(<span class="dt">mode =</span> brotools<span class="op">::</span><span class="kw">sample_mode</span>(value, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb20-47"><a href="package-development.html#cb20-47"></a>                           <span class="dt">nobs =</span> <span class="kw">length</span>(value),</span>
<span id="cb20-48"><a href="package-development.html#cb20-48"></a>                           <span class="dt">n_missing =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(value)),</span>
<span id="cb20-49"><a href="package-development.html#cb20-49"></a>                           <span class="dt">n_unique =</span> <span class="kw">length</span>(<span class="kw">unique</span>(value)))) <span class="op">%&gt;%</span></span>
<span id="cb20-50"><a href="package-development.html#cb20-50"></a><span class="st">        </span><span class="kw">mutate</span>(<span class="dt">type =</span> type)</span>
<span id="cb20-51"><a href="package-development.html#cb20-51"></a>}</span>
<span id="cb20-52"><a href="package-development.html#cb20-52"></a></span>
<span id="cb20-53"><a href="package-development.html#cb20-53"></a><span class="co">#&#39; Compute descriptive statistics for the character columns of a data frame.</span></span>
<span id="cb20-54"><a href="package-development.html#cb20-54"></a><span class="co">#&#39; @param df The data frame to summarise.</span></span>
<span id="cb20-55"><a href="package-development.html#cb20-55"></a><span class="co">#&#39; @return A data frame with a description of the character columns.</span></span>
<span id="cb20-56"><a href="package-development.html#cb20-56"></a><span class="co">#&#39; @import dplyr</span></span>
<span id="cb20-57"><a href="package-development.html#cb20-57"></a><span class="co">#&#39; @importFrom tidyr gather</span></span>
<span id="cb20-58"><a href="package-development.html#cb20-58"></a><span class="co">#&#39; @export</span></span>
<span id="cb20-59"><a href="package-development.html#cb20-59"></a><span class="co">#&#39; @examples</span></span>
<span id="cb20-60"><a href="package-development.html#cb20-60"></a><span class="co">#&#39; \dontrun{</span></span>
<span id="cb20-61"><a href="package-development.html#cb20-61"></a><span class="co">#&#39; describe(dataset)</span></span>
<span id="cb20-62"><a href="package-development.html#cb20-62"></a><span class="co">#&#39; }</span></span>
<span id="cb20-63"><a href="package-development.html#cb20-63"></a>describe_character &lt;-<span class="st"> </span><span class="cf">function</span>(df){</span>
<span id="cb20-64"><a href="package-development.html#cb20-64"></a>    df <span class="op">%&gt;%</span></span>
<span id="cb20-65"><a href="package-development.html#cb20-65"></a><span class="st">        </span><span class="kw">select_if</span>(is.character) <span class="op">%&gt;%</span></span>
<span id="cb20-66"><a href="package-development.html#cb20-66"></a><span class="st">        </span><span class="kw">describe_character_or_factors</span>(<span class="dt">type =</span> <span class="st">&quot;Character&quot;</span>)</span>
<span id="cb20-67"><a href="package-development.html#cb20-67"></a>}</span></code></pre></div>
<p>Let’s now continue on to the next section, where we will learn to document the package.</p>
</div>
</div>
<div id="documenting-your-package" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> Documenting your package</h2>
<p>There are several files that you must edit to fully document the package; for now, only the functions
are documented. The first of these files is the <code>DESCRIPTION</code> file.</p>
<div id="description" class="section level3" number="9.5.1">
<h3><span class="header-section-number">9.5.1</span> Description</h3>
<p>By default, the <code>DESCRIPTION</code> file, which you can find in the root of your package project, contains
the following lines:</p>
<pre><code>Package: arcade
Type: Package
Title: What the Package Does (Title Case)
Version: 0.1.0
Author: Who wrote it
Maintainer: The package maintainer &lt;yourself@somewhere.net&gt;
Description: More about what it does (maybe more than one line)
    Use four spaces when indenting paragraphs within the Description.
License: What license is it under?
Encoding: UTF-8
LazyData: true
RoxygenNote: 7.0.2</code></pre>
<p>Each section is quite self-explanatory. This is how it could look like once you’re done editing it:</p>
<pre><code>Package: arcade
Type: Package
Title: List of highest-grossing Arcade Games
Version: 0.1.0
Author: person(&quot;Harold&quot;, &quot;Zurcher&quot;, email = &quot;harold.zurcher@madisonbus.com&quot;, role = c(&quot;aut&quot;, &quot;cre&quot;))
Description: This package contains data about the highest-grossing arcade games from the 70&#39;s until
    2010&#39;s. Also contains some functions to summarize data.
License: CC0
Encoding: UTF-8
LazyData: true
RoxygenNote: 7.0.2</code></pre>
<p>The <code>Author</code> and <code>Maintainer</code> need some further explanations; I have added Harold Zurcher as
the athor and creator, with the <code>role = c("aut", "cre")</code> bit. <code>"cre"</code> can also be used for
maintainer, so I removed the <code>Maintainer</code> line.</p>
</div>
</div>
<div id="unit-testing-your-package" class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> Unit testing your package</h2>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-wickham2015">
<p>Wickham, Hadley. 2015. <em>R Packages</em>. 1st ed. O’Reilly. <a href="http://r-pkgs.had.co.nz/">http://r-pkgs.had.co.nz/</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>If you know who Harold Zurcher is, you da real MVP<a href="package-development.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functional-programming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="further-topics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
